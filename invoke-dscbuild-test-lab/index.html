<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.11.2 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Invoke-DscBuild | Test-Lab - PowerShell Journey</title>
<meta name="description" content="Posts in This series  Test-HomeLab -InputObject “The Plan”  Get-Posh-Git | Test-Lab  Get-DSCFramework | Test-Lab  Invoke-DscBuild | Test-Lab (This Post)  Test-Lab | Update-GitHubIn the last post we forked a copy of the Powershell.org DSC tools and cloned a copy locallyToday I’m going to get the example configuration working.Now looking at the README.md under examples seems straightforward, but I know for a fact that it’s missing a few steps.This folder contains some very basic examples of what a DSC configurationData folder structure, script, and call to Invoke-DscBuild might look like.  If you want to execute SampleBuild.ps1, there are a few dependencies you need to set up ahead of time:  You must install all of the DSC tooling modules from this repository into your PSModulePath (typically into C:\Program Files\WindowsPowerShell\Modules)  You must also copy the Tooling\Examples\SampleConfiguration folder to the PSModulePath.  You must copy Pester (version 3.0.0 or later) and ProtectedData (version 2.1 or later) into the PSModulePath.  You should create a DSC_Resources folder in the same directory as SampleBuild.ps1 and DSC_Configuration.  Copy the following modules into that DSC_Resources folder:  StackExchangeResources  cWebAdministration  cSmbShareOnce these dependencies are set up, you can execute SampleBuild.ps1.  It will run tests against the 3 modules in your DSC_Resources folder, compile your configuration into MOF documents, produce zip files for the resource modules, generate checksums for everything and copy them into C:\Program Files\WindowsPowerShell\DscService\Looks like we are going to need a few more DSC resources. I’m going to go and fork/clone them just like before. (don’t forget to update the URL’s to match your own fork. )# Download required files via Git#Next line not needed if you were following along with my last bloggit clone https://github.com/BladeFireLight/DSC.git c:\GitHub\PshOrgDSC --branch developmentgit clone https://github.com/BladeFireLight/StackExchangeResources.git c:\GitHub\StackExchangeResourcesgit clone https://github.com/BladeFireLight/cWebAdministration.git c:\GitHub\cWebAdministrationgit clone https://github.com/BladeFireLight/cSmbShare.git c:\GitHub\cSmbSharegit clone https://github.com/BladeFireLight/Pester c:\GitHub\Pestergit clone https://github.com/BladeFireLight/ProtectedData.git c:\GitHub\ProtectedDataNow I’m going to create some folder structure and place all the files where they need to go#Create Foldersmkdir c:\DSCmkdir C:\DSC\BuldOutputmkdir C:\DSC\DSC_Configurationmkdir C:\DSC\DSC_Resourcesmkdir C:\DSC\DSC_Scriptmkdir C:\DSC\DSC_Tooling#Copy Filescopy C:\github\PshOrgDSC\Tooling\* C:\DSC\DSC_Tooling\ -Exclude &#39;examples&#39;, &#39;readme.md&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Exclude &#39;examples&#39;, &#39;readme.md&#39; -Recursecopy C:\github\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;Pester&#39;,&#39;ProtectedData&#39; -Recursecopy C:\github\* C:\DSC\DSC_Tooling\ -Include &#39;Pester&#39;,&#39;ProtectedData&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\SampleBuild.ps1 c:\dsc\SampleBuild.ps1copy c:\github\* C:\DSC\DSC_Resources -Include &#39;cSmbShare&#39;, &#39;cWebAdministration&#39;, &#39;StackExchangeResources&#39; -Recursecopy c:\github\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;cSmbShare&#39;, &#39;cWebAdministration&#39;, &#39;StackExchangeResources&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\DSC_Configuration\* C:\DSC\DSC_Configuration -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\* C:\DSC\DSC_Script -Include &#39;SampleConfiguration&#39; -Recurse#delete unneeded folders.dir -Path c:\dsc -Include &#39;.git&#39; -Recurse | del -Recurse -Force #-Confirm:$falsedir -Path &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;.git&#39; -Recurse | del -Recurse -ForceThen result should give us a folder structure like thisC:\DSC├───BuldOutput├───DSC_Configuration│   ├───AllNodes│   ├───Services│   └───SiteData├───DSC_Resources│   ├───cSmbShare│   │   └───DscResources│   │       └───PSHOrg_cSmbShare│   ├───cWebAdministration│   │   ├───DSCResources│   │   │   ├───PSHOrg_cAppPool│   │   │   └───PSHOrg_cWebsite│   │   └───Examples│   └───StackExchangeResources│       ├───DSCResources│       │   ├───StackExchange_CertificateStore│       │   ├───StackExchange_FirewallRule│       │   ├───StackExchange_NetworkAdapter│       │   ├───StackExchange_Pagefile│       │   │   ├───StackExchange_en-US│       │   │   └───StackExchange_nl-NL│       │   ├───StackExchange_PowerPlan│       │   │   └───StackExchange_en-US│       │   ├───StackExchange_ScheduledTask│       │   ├───StackExchange_SetExecutionPolicy│       │   │   └───StackExchange_en-US│       │   └───StackExchange_Timezone│       └───test│           ├───integration│           │   └───StackExchange_PageFile│           │       └───pester│           └───unit│               └───StackExchange_Pagefile│                   └───pester├───DSC_Script│   └───SampleConfiguration└───DSC_Tooling    ├───cDscDiagnostics    ├───cDscResourceDesigner    ├───dscbuild    ├───DscConfiguration    ├───DscDevelopment    ├───DscOperations    ├───Pester    │   ├───bin    │   ├───en-US    │   ├───Examples    │   │   ├───Calculator    │   │   └───Validator    │   ├───Functions    │   │   └───Assertions    │   ├───Snippets    │   └───vendor    │       └───tools    │           ├───OneGet    │           │   └───Etc    │           └───PowerShellGet    │               └───en-US    └───ProtectedData        └───en-USC:\PROGRAM FILES\WINDOWSPOWERSHELL\MODULES├───cDscDiagnostics├───cDscResourceDesigner├───cSmbShare│   └───DscResources│       └───PSHOrg_cSmbShare├───cWebAdministration│   ├───DSCResources│   │   ├───PSHOrg_cAppPool│   │   └───PSHOrg_cWebsite│   └───Examples├───dscbuild├───DscConfiguration├───DscDevelopment├───DscOperations├───Pester│   ├───bin│   ├───en-US│   ├───Examples│   │   ├───Calculator│   │   └───Validator│   ├───Functions│   │   └───Assertions│   ├───Snippets│   └───vendor│       └───tools│           ├───OneGet│           │   └───Etc│           └───PowerShellGet│               └───en-US├───ProtectedData│   └───en-US└───StackExchangeResources    ├───DSCResources    │   ├───StackExchange_CertificateStore    │   ├───StackExchange_FirewallRule    │   ├───StackExchange_NetworkAdapter    │   ├───StackExchange_Pagefile    │   │   ├───StackExchange_en-US    │   │   └───StackExchange_nl-NL    │   ├───StackExchange_PowerPlan    │   │   └───StackExchange_en-US    │   ├───StackExchange_ScheduledTask    │   ├───StackExchange_SetExecutionPolicy    │   │   └───StackExchange_en-US    │   └───StackExchange_Timezone    └───test        ├───integration        │   └───StackExchange_PageFile        │       └───pester        └───unit            └───StackExchange_Pagefile                └───pesternow lets fix C:\DSC\SampleBuild.ps1end{    Import-Module Pester -ErrorAction Stop    Import-Module dscbuild -ErrorAction Stop    Import-Module dscconfiguration -ErrorAction Stop    $params = @{        WorkingDirectory = (Get-TempDirectory).FullName        SourceResourceDirectory = &quot;$PSScriptRoot\DSC_Resources&quot;        SourceToolDirectory = &quot;$PSScriptRoot\DSC_Tooling&quot;        DestinationRootDirectory = &quot;$PSScriptRoot\BuldOutput&quot;        DestinationToolDirectory = $env:TEMP        ConfigurationData = Get-DscConfigurationData -Path &quot;$PSScriptRoot\DSC_Configuration&quot; -Force -verbose        ModulePath = &quot;$PSScriptRoot\DSC_Script&quot;  , &quot;$PSScriptRoot\DSC_Tooling&quot;        ConfigurationModuleName = &#39;SampleConfiguration&#39;        ConfigurationName = &#39;SampleConfiguration&#39;        Configuration = $true        Resource = $true    }    Invoke-DscBuild @params -verbose}begin{    function Get-TempDirectory    {        [CmdletBinding()]        [OutputType([System.IO.DirectoryInfo])]        param ( )        do        {            $tempDir = Join-Path -Path ([System.IO.Path]::GetTempPath()) -ChildPath ([System.IO.Path]::GetRandomFileName())        }        until (-not (Test-Path -Path $tempDir -PathType Container))        return New-Item -Path $tempDir -ItemType Directory -ErrorAction Stop    }}So what is different?  DestinationRootDirectory = “$PSScriptRoot\BuldOutput”          Changed to point to a relative output. this is a test, so there is no need to place it into the common location for a pull server, although in production you may want to. I prefer to copy the files after a build, as it’s usually built on a machine other then the pull server        ConfigurationData = Get-DscConfigurationData -Path “$PSScriptRoot\DSC_Configuration” -Force -verbose  *added verbose so I can see how its progresses and help with troubleshooting  ModulePath = “$PSScriptRoot\DSC_Script”  , “$PSScriptRoot\DSC_Tooling”          This is the big one. ModulePath and SourceResourceDirectory are going to be the only path’s in $psmodulepath when the configuration module (the module referenced by ConfigurationModuleName ) is loaded and when the configuration in ConfigurationName  is executed. This feature was added to resolve a problem when your modules used to build .mof files may be newer then the ones used to configure the machine running them. Something I ran into and Dave Wyatt was kind enough to solve        Invoke-DscBuild @params -verbose  *Added -verbose. I’m a bit of a verbose junky.With the updates to SampleBuild.ps1 we are ready to build our first sample set of .mof filesI do this in a clean environment so I’m opening PowerShell as an administrator and running C:\DSC\SampleBuild.ps1. After a long bit of scrolling if it works the last few lines should look like this.VERBOSE: Moving 718aec80-e8fe-41b5-ac31-fbcd5d0186b1.mof to C:\DSC\BuldOutput\ConfigurationVERBOSE: Moving b4519959-9724-40d5-ab62-5c4f82bbcd80.mof to C:\DSC\BuldOutput\ConfigurationVERBOSE: Moving fc107c0b-1fc8-45fb-9991-a0a1f0fd6c21.mof to C:\DSC\BuldOutput\ConfigurationCongratulations you have your first set of .mof files working with the PowerShell.org DSC tools.Next up. Creating a pull request to update the readme.md and SampleBuild.ps1">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="PowerShell Journey">
<meta property="og:title" content="Invoke-DscBuild | Test-Lab">
<meta property="og:url" content="https://blog.bladefirelight.com/invoke-dscbuild-test-lab/">


  <meta property="og:description" content="Posts in This series  Test-HomeLab -InputObject “The Plan”  Get-Posh-Git | Test-Lab  Get-DSCFramework | Test-Lab  Invoke-DscBuild | Test-Lab (This Post)  Test-Lab | Update-GitHubIn the last post we forked a copy of the Powershell.org DSC tools and cloned a copy locallyToday I’m going to get the example configuration working.Now looking at the README.md under examples seems straightforward, but I know for a fact that it’s missing a few steps.This folder contains some very basic examples of what a DSC configurationData folder structure, script, and call to Invoke-DscBuild might look like.  If you want to execute SampleBuild.ps1, there are a few dependencies you need to set up ahead of time:  You must install all of the DSC tooling modules from this repository into your PSModulePath (typically into C:\Program Files\WindowsPowerShell\Modules)  You must also copy the Tooling\Examples\SampleConfiguration folder to the PSModulePath.  You must copy Pester (version 3.0.0 or later) and ProtectedData (version 2.1 or later) into the PSModulePath.  You should create a DSC_Resources folder in the same directory as SampleBuild.ps1 and DSC_Configuration.  Copy the following modules into that DSC_Resources folder:  StackExchangeResources  cWebAdministration  cSmbShareOnce these dependencies are set up, you can execute SampleBuild.ps1.  It will run tests against the 3 modules in your DSC_Resources folder, compile your configuration into MOF documents, produce zip files for the resource modules, generate checksums for everything and copy them into C:\Program Files\WindowsPowerShell\DscService\Looks like we are going to need a few more DSC resources. I’m going to go and fork/clone them just like before. (don’t forget to update the URL’s to match your own fork. )# Download required files via Git#Next line not needed if you were following along with my last bloggit clone https://github.com/BladeFireLight/DSC.git c:\GitHub\PshOrgDSC --branch developmentgit clone https://github.com/BladeFireLight/StackExchangeResources.git c:\GitHub\StackExchangeResourcesgit clone https://github.com/BladeFireLight/cWebAdministration.git c:\GitHub\cWebAdministrationgit clone https://github.com/BladeFireLight/cSmbShare.git c:\GitHub\cSmbSharegit clone https://github.com/BladeFireLight/Pester c:\GitHub\Pestergit clone https://github.com/BladeFireLight/ProtectedData.git c:\GitHub\ProtectedDataNow I’m going to create some folder structure and place all the files where they need to go#Create Foldersmkdir c:\DSCmkdir C:\DSC\BuldOutputmkdir C:\DSC\DSC_Configurationmkdir C:\DSC\DSC_Resourcesmkdir C:\DSC\DSC_Scriptmkdir C:\DSC\DSC_Tooling#Copy Filescopy C:\github\PshOrgDSC\Tooling\* C:\DSC\DSC_Tooling\ -Exclude &#39;examples&#39;, &#39;readme.md&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Exclude &#39;examples&#39;, &#39;readme.md&#39; -Recursecopy C:\github\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;Pester&#39;,&#39;ProtectedData&#39; -Recursecopy C:\github\* C:\DSC\DSC_Tooling\ -Include &#39;Pester&#39;,&#39;ProtectedData&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\SampleBuild.ps1 c:\dsc\SampleBuild.ps1copy c:\github\* C:\DSC\DSC_Resources -Include &#39;cSmbShare&#39;, &#39;cWebAdministration&#39;, &#39;StackExchangeResources&#39; -Recursecopy c:\github\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;cSmbShare&#39;, &#39;cWebAdministration&#39;, &#39;StackExchangeResources&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\DSC_Configuration\* C:\DSC\DSC_Configuration -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\* C:\DSC\DSC_Script -Include &#39;SampleConfiguration&#39; -Recurse#delete unneeded folders.dir -Path c:\dsc -Include &#39;.git&#39; -Recurse | del -Recurse -Force #-Confirm:$falsedir -Path &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;.git&#39; -Recurse | del -Recurse -ForceThen result should give us a folder structure like thisC:\DSC├───BuldOutput├───DSC_Configuration│   ├───AllNodes│   ├───Services│   └───SiteData├───DSC_Resources│   ├───cSmbShare│   │   └───DscResources│   │       └───PSHOrg_cSmbShare│   ├───cWebAdministration│   │   ├───DSCResources│   │   │   ├───PSHOrg_cAppPool│   │   │   └───PSHOrg_cWebsite│   │   └───Examples│   └───StackExchangeResources│       ├───DSCResources│       │   ├───StackExchange_CertificateStore│       │   ├───StackExchange_FirewallRule│       │   ├───StackExchange_NetworkAdapter│       │   ├───StackExchange_Pagefile│       │   │   ├───StackExchange_en-US│       │   │   └───StackExchange_nl-NL│       │   ├───StackExchange_PowerPlan│       │   │   └───StackExchange_en-US│       │   ├───StackExchange_ScheduledTask│       │   ├───StackExchange_SetExecutionPolicy│       │   │   └───StackExchange_en-US│       │   └───StackExchange_Timezone│       └───test│           ├───integration│           │   └───StackExchange_PageFile│           │       └───pester│           └───unit│               └───StackExchange_Pagefile│                   └───pester├───DSC_Script│   └───SampleConfiguration└───DSC_Tooling    ├───cDscDiagnostics    ├───cDscResourceDesigner    ├───dscbuild    ├───DscConfiguration    ├───DscDevelopment    ├───DscOperations    ├───Pester    │   ├───bin    │   ├───en-US    │   ├───Examples    │   │   ├───Calculator    │   │   └───Validator    │   ├───Functions    │   │   └───Assertions    │   ├───Snippets    │   └───vendor    │       └───tools    │           ├───OneGet    │           │   └───Etc    │           └───PowerShellGet    │               └───en-US    └───ProtectedData        └───en-USC:\PROGRAM FILES\WINDOWSPOWERSHELL\MODULES├───cDscDiagnostics├───cDscResourceDesigner├───cSmbShare│   └───DscResources│       └───PSHOrg_cSmbShare├───cWebAdministration│   ├───DSCResources│   │   ├───PSHOrg_cAppPool│   │   └───PSHOrg_cWebsite│   └───Examples├───dscbuild├───DscConfiguration├───DscDevelopment├───DscOperations├───Pester│   ├───bin│   ├───en-US│   ├───Examples│   │   ├───Calculator│   │   └───Validator│   ├───Functions│   │   └───Assertions│   ├───Snippets│   └───vendor│       └───tools│           ├───OneGet│           │   └───Etc│           └───PowerShellGet│               └───en-US├───ProtectedData│   └───en-US└───StackExchangeResources    ├───DSCResources    │   ├───StackExchange_CertificateStore    │   ├───StackExchange_FirewallRule    │   ├───StackExchange_NetworkAdapter    │   ├───StackExchange_Pagefile    │   │   ├───StackExchange_en-US    │   │   └───StackExchange_nl-NL    │   ├───StackExchange_PowerPlan    │   │   └───StackExchange_en-US    │   ├───StackExchange_ScheduledTask    │   ├───StackExchange_SetExecutionPolicy    │   │   └───StackExchange_en-US    │   └───StackExchange_Timezone    └───test        ├───integration        │   └───StackExchange_PageFile        │       └───pester        └───unit            └───StackExchange_Pagefile                └───pesternow lets fix C:\DSC\SampleBuild.ps1end{    Import-Module Pester -ErrorAction Stop    Import-Module dscbuild -ErrorAction Stop    Import-Module dscconfiguration -ErrorAction Stop    $params = @{        WorkingDirectory = (Get-TempDirectory).FullName        SourceResourceDirectory = &quot;$PSScriptRoot\DSC_Resources&quot;        SourceToolDirectory = &quot;$PSScriptRoot\DSC_Tooling&quot;        DestinationRootDirectory = &quot;$PSScriptRoot\BuldOutput&quot;        DestinationToolDirectory = $env:TEMP        ConfigurationData = Get-DscConfigurationData -Path &quot;$PSScriptRoot\DSC_Configuration&quot; -Force -verbose        ModulePath = &quot;$PSScriptRoot\DSC_Script&quot;  , &quot;$PSScriptRoot\DSC_Tooling&quot;        ConfigurationModuleName = &#39;SampleConfiguration&#39;        ConfigurationName = &#39;SampleConfiguration&#39;        Configuration = $true        Resource = $true    }    Invoke-DscBuild @params -verbose}begin{    function Get-TempDirectory    {        [CmdletBinding()]        [OutputType([System.IO.DirectoryInfo])]        param ( )        do        {            $tempDir = Join-Path -Path ([System.IO.Path]::GetTempPath()) -ChildPath ([System.IO.Path]::GetRandomFileName())        }        until (-not (Test-Path -Path $tempDir -PathType Container))        return New-Item -Path $tempDir -ItemType Directory -ErrorAction Stop    }}So what is different?  DestinationRootDirectory = “$PSScriptRoot\BuldOutput”          Changed to point to a relative output. this is a test, so there is no need to place it into the common location for a pull server, although in production you may want to. I prefer to copy the files after a build, as it’s usually built on a machine other then the pull server        ConfigurationData = Get-DscConfigurationData -Path “$PSScriptRoot\DSC_Configuration” -Force -verbose  *added verbose so I can see how its progresses and help with troubleshooting  ModulePath = “$PSScriptRoot\DSC_Script”  , “$PSScriptRoot\DSC_Tooling”          This is the big one. ModulePath and SourceResourceDirectory are going to be the only path’s in $psmodulepath when the configuration module (the module referenced by ConfigurationModuleName ) is loaded and when the configuration in ConfigurationName  is executed. This feature was added to resolve a problem when your modules used to build .mof files may be newer then the ones used to configure the machine running them. Something I ran into and Dave Wyatt was kind enough to solve        Invoke-DscBuild @params -verbose  *Added -verbose. I’m a bit of a verbose junky.With the updates to SampleBuild.ps1 we are ready to build our first sample set of .mof filesI do this in a clean environment so I’m opening PowerShell as an administrator and running C:\DSC\SampleBuild.ps1. After a long bit of scrolling if it works the last few lines should look like this.VERBOSE: Moving 718aec80-e8fe-41b5-ac31-fbcd5d0186b1.mof to C:\DSC\BuldOutput\ConfigurationVERBOSE: Moving b4519959-9724-40d5-ab62-5c4f82bbcd80.mof to C:\DSC\BuldOutput\ConfigurationVERBOSE: Moving fc107c0b-1fc8-45fb-9991-a0a1f0fd6c21.mof to C:\DSC\BuldOutput\ConfigurationCongratulations you have your first set of .mof files working with the PowerShell.org DSC tools.Next up. Creating a pull request to update the readme.md and SampleBuild.ps1">





  <meta name="twitter:site" content="@BladeFireLight">
  <meta name="twitter:title" content="Invoke-DscBuild | Test-Lab">
  <meta name="twitter:description" content="Posts in This series  Test-HomeLab -InputObject “The Plan”  Get-Posh-Git | Test-Lab  Get-DSCFramework | Test-Lab  Invoke-DscBuild | Test-Lab (This Post)  Test-Lab | Update-GitHubIn the last post we forked a copy of the Powershell.org DSC tools and cloned a copy locallyToday I’m going to get the example configuration working.Now looking at the README.md under examples seems straightforward, but I know for a fact that it’s missing a few steps.This folder contains some very basic examples of what a DSC configurationData folder structure, script, and call to Invoke-DscBuild might look like.  If you want to execute SampleBuild.ps1, there are a few dependencies you need to set up ahead of time:  You must install all of the DSC tooling modules from this repository into your PSModulePath (typically into C:\Program Files\WindowsPowerShell\Modules)  You must also copy the Tooling\Examples\SampleConfiguration folder to the PSModulePath.  You must copy Pester (version 3.0.0 or later) and ProtectedData (version 2.1 or later) into the PSModulePath.  You should create a DSC_Resources folder in the same directory as SampleBuild.ps1 and DSC_Configuration.  Copy the following modules into that DSC_Resources folder:  StackExchangeResources  cWebAdministration  cSmbShareOnce these dependencies are set up, you can execute SampleBuild.ps1.  It will run tests against the 3 modules in your DSC_Resources folder, compile your configuration into MOF documents, produce zip files for the resource modules, generate checksums for everything and copy them into C:\Program Files\WindowsPowerShell\DscService\Looks like we are going to need a few more DSC resources. I’m going to go and fork/clone them just like before. (don’t forget to update the URL’s to match your own fork. )# Download required files via Git#Next line not needed if you were following along with my last bloggit clone https://github.com/BladeFireLight/DSC.git c:\GitHub\PshOrgDSC --branch developmentgit clone https://github.com/BladeFireLight/StackExchangeResources.git c:\GitHub\StackExchangeResourcesgit clone https://github.com/BladeFireLight/cWebAdministration.git c:\GitHub\cWebAdministrationgit clone https://github.com/BladeFireLight/cSmbShare.git c:\GitHub\cSmbSharegit clone https://github.com/BladeFireLight/Pester c:\GitHub\Pestergit clone https://github.com/BladeFireLight/ProtectedData.git c:\GitHub\ProtectedDataNow I’m going to create some folder structure and place all the files where they need to go#Create Foldersmkdir c:\DSCmkdir C:\DSC\BuldOutputmkdir C:\DSC\DSC_Configurationmkdir C:\DSC\DSC_Resourcesmkdir C:\DSC\DSC_Scriptmkdir C:\DSC\DSC_Tooling#Copy Filescopy C:\github\PshOrgDSC\Tooling\* C:\DSC\DSC_Tooling\ -Exclude &#39;examples&#39;, &#39;readme.md&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Exclude &#39;examples&#39;, &#39;readme.md&#39; -Recursecopy C:\github\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;Pester&#39;,&#39;ProtectedData&#39; -Recursecopy C:\github\* C:\DSC\DSC_Tooling\ -Include &#39;Pester&#39;,&#39;ProtectedData&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\SampleBuild.ps1 c:\dsc\SampleBuild.ps1copy c:\github\* C:\DSC\DSC_Resources -Include &#39;cSmbShare&#39;, &#39;cWebAdministration&#39;, &#39;StackExchangeResources&#39; -Recursecopy c:\github\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;cSmbShare&#39;, &#39;cWebAdministration&#39;, &#39;StackExchangeResources&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\DSC_Configuration\* C:\DSC\DSC_Configuration -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\* C:\DSC\DSC_Script -Include &#39;SampleConfiguration&#39; -Recurse#delete unneeded folders.dir -Path c:\dsc -Include &#39;.git&#39; -Recurse | del -Recurse -Force #-Confirm:$falsedir -Path &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;.git&#39; -Recurse | del -Recurse -ForceThen result should give us a folder structure like thisC:\DSC├───BuldOutput├───DSC_Configuration│   ├───AllNodes│   ├───Services│   └───SiteData├───DSC_Resources│   ├───cSmbShare│   │   └───DscResources│   │       └───PSHOrg_cSmbShare│   ├───cWebAdministration│   │   ├───DSCResources│   │   │   ├───PSHOrg_cAppPool│   │   │   └───PSHOrg_cWebsite│   │   └───Examples│   └───StackExchangeResources│       ├───DSCResources│       │   ├───StackExchange_CertificateStore│       │   ├───StackExchange_FirewallRule│       │   ├───StackExchange_NetworkAdapter│       │   ├───StackExchange_Pagefile│       │   │   ├───StackExchange_en-US│       │   │   └───StackExchange_nl-NL│       │   ├───StackExchange_PowerPlan│       │   │   └───StackExchange_en-US│       │   ├───StackExchange_ScheduledTask│       │   ├───StackExchange_SetExecutionPolicy│       │   │   └───StackExchange_en-US│       │   └───StackExchange_Timezone│       └───test│           ├───integration│           │   └───StackExchange_PageFile│           │       └───pester│           └───unit│               └───StackExchange_Pagefile│                   └───pester├───DSC_Script│   └───SampleConfiguration└───DSC_Tooling    ├───cDscDiagnostics    ├───cDscResourceDesigner    ├───dscbuild    ├───DscConfiguration    ├───DscDevelopment    ├───DscOperations    ├───Pester    │   ├───bin    │   ├───en-US    │   ├───Examples    │   │   ├───Calculator    │   │   └───Validator    │   ├───Functions    │   │   └───Assertions    │   ├───Snippets    │   └───vendor    │       └───tools    │           ├───OneGet    │           │   └───Etc    │           └───PowerShellGet    │               └───en-US    └───ProtectedData        └───en-USC:\PROGRAM FILES\WINDOWSPOWERSHELL\MODULES├───cDscDiagnostics├───cDscResourceDesigner├───cSmbShare│   └───DscResources│       └───PSHOrg_cSmbShare├───cWebAdministration│   ├───DSCResources│   │   ├───PSHOrg_cAppPool│   │   └───PSHOrg_cWebsite│   └───Examples├───dscbuild├───DscConfiguration├───DscDevelopment├───DscOperations├───Pester│   ├───bin│   ├───en-US│   ├───Examples│   │   ├───Calculator│   │   └───Validator│   ├───Functions│   │   └───Assertions│   ├───Snippets│   └───vendor│       └───tools│           ├───OneGet│           │   └───Etc│           └───PowerShellGet│               └───en-US├───ProtectedData│   └───en-US└───StackExchangeResources    ├───DSCResources    │   ├───StackExchange_CertificateStore    │   ├───StackExchange_FirewallRule    │   ├───StackExchange_NetworkAdapter    │   ├───StackExchange_Pagefile    │   │   ├───StackExchange_en-US    │   │   └───StackExchange_nl-NL    │   ├───StackExchange_PowerPlan    │   │   └───StackExchange_en-US    │   ├───StackExchange_ScheduledTask    │   ├───StackExchange_SetExecutionPolicy    │   │   └───StackExchange_en-US    │   └───StackExchange_Timezone    └───test        ├───integration        │   └───StackExchange_PageFile        │       └───pester        └───unit            └───StackExchange_Pagefile                └───pesternow lets fix C:\DSC\SampleBuild.ps1end{    Import-Module Pester -ErrorAction Stop    Import-Module dscbuild -ErrorAction Stop    Import-Module dscconfiguration -ErrorAction Stop    $params = @{        WorkingDirectory = (Get-TempDirectory).FullName        SourceResourceDirectory = &quot;$PSScriptRoot\DSC_Resources&quot;        SourceToolDirectory = &quot;$PSScriptRoot\DSC_Tooling&quot;        DestinationRootDirectory = &quot;$PSScriptRoot\BuldOutput&quot;        DestinationToolDirectory = $env:TEMP        ConfigurationData = Get-DscConfigurationData -Path &quot;$PSScriptRoot\DSC_Configuration&quot; -Force -verbose        ModulePath = &quot;$PSScriptRoot\DSC_Script&quot;  , &quot;$PSScriptRoot\DSC_Tooling&quot;        ConfigurationModuleName = &#39;SampleConfiguration&#39;        ConfigurationName = &#39;SampleConfiguration&#39;        Configuration = $true        Resource = $true    }    Invoke-DscBuild @params -verbose}begin{    function Get-TempDirectory    {        [CmdletBinding()]        [OutputType([System.IO.DirectoryInfo])]        param ( )        do        {            $tempDir = Join-Path -Path ([System.IO.Path]::GetTempPath()) -ChildPath ([System.IO.Path]::GetRandomFileName())        }        until (-not (Test-Path -Path $tempDir -PathType Container))        return New-Item -Path $tempDir -ItemType Directory -ErrorAction Stop    }}So what is different?  DestinationRootDirectory = “$PSScriptRoot\BuldOutput”          Changed to point to a relative output. this is a test, so there is no need to place it into the common location for a pull server, although in production you may want to. I prefer to copy the files after a build, as it’s usually built on a machine other then the pull server        ConfigurationData = Get-DscConfigurationData -Path “$PSScriptRoot\DSC_Configuration” -Force -verbose  *added verbose so I can see how its progresses and help with troubleshooting  ModulePath = “$PSScriptRoot\DSC_Script”  , “$PSScriptRoot\DSC_Tooling”          This is the big one. ModulePath and SourceResourceDirectory are going to be the only path’s in $psmodulepath when the configuration module (the module referenced by ConfigurationModuleName ) is loaded and when the configuration in ConfigurationName  is executed. This feature was added to resolve a problem when your modules used to build .mof files may be newer then the ones used to configure the machine running them. Something I ran into and Dave Wyatt was kind enough to solve        Invoke-DscBuild @params -verbose  *Added -verbose. I’m a bit of a verbose junky.With the updates to SampleBuild.ps1 we are ready to build our first sample set of .mof filesI do this in a clean environment so I’m opening PowerShell as an administrator and running C:\DSC\SampleBuild.ps1. After a long bit of scrolling if it works the last few lines should look like this.VERBOSE: Moving 718aec80-e8fe-41b5-ac31-fbcd5d0186b1.mof to C:\DSC\BuldOutput\ConfigurationVERBOSE: Moving b4519959-9724-40d5-ab62-5c4f82bbcd80.mof to C:\DSC\BuldOutput\ConfigurationVERBOSE: Moving fc107c0b-1fc8-45fb-9991-a0a1f0fd6c21.mof to C:\DSC\BuldOutput\ConfigurationCongratulations you have your first set of .mof files working with the PowerShell.org DSC tools.Next up. Creating a pull request to update the readme.md and SampleBuild.ps1">
  <meta name="twitter:url" content="https://blog.bladefirelight.com/invoke-dscbuild-test-lab/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2015-05-03T00:00:00-05:00">





  

  


<link rel="canonical" href="https://blog.bladefirelight.com/invoke-dscbuild-test-lab/">







  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "David Jones",
      "url": "https://blog.bladefirelight.com",
      "sameAs": null
    }
  </script>



  <meta name="google-site-verification" content="google6494e52e0a9f7679" />


  <meta name="msvalidate.01" content="FF7ECBA8DC3257F544706CFDE304E3B9">




<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="PowerShell Journey Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if lte IE 11]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 11]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/">PowerShell Journey</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="https://blog.bladefirelight.com/nuggets/" >Nuggets</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://blog.bladefirelight.com/windowsimagetools/" >Windows Image Tools</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://blog.bladefirelight.com/XcomUtil/" >XcomUtil</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://blog.bladefirelight.com/year-archive/" >Archive by Date</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://blog.bladefirelight.com/categories/" >By Category</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://blog.bladefirelight.com/tags/" >By Tag</a>
            </li>
          
        </ul>
        
        <button class="search__toggle" type="button">
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="http://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="https://blog.bladefirelight.com/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Invoke-DscBuild \| Test-Lab</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/avatar1.jpg" alt="David Jones" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">David Jones</h3>
    
    
      <p class="author__bio" itemprop="description">
        20 years IT Pro. Life long student of tech
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Gretna, NE</span>
        </li>
      

      

      
        <li>
          <a href="mailto:BladeFireLight@outlook.com">
            <meta itemprop="email" content="BladeFireLight@outlook.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      

      
        <li>
          <a href="https://twitter.com/BladeFireLight" itemprop="sameAs">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/BladeFireLight" itemprop="sameAs">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Invoke-DscBuild | Test-Lab">
    <meta itemprop="description" content="Posts in This series  Test-HomeLab -InputObject “The Plan”  Get-Posh-Git | Test-Lab  Get-DSCFramework | Test-Lab  Invoke-DscBuild | Test-Lab (This Post)  Test-Lab | Update-GitHubIn the last post we forked a copy of the Powershell.org DSC tools and cloned a copy locallyToday I’m going to get the example configuration working.Now looking at the README.md under examples seems straightforward, but I know for a fact that it’s missing a few steps.This folder contains some very basic examples of what a DSC configurationData folder structure, script, and call to Invoke-DscBuild might look like.  If you want to execute SampleBuild.ps1, there are a few dependencies you need to set up ahead of time:  You must install all of the DSC tooling modules from this repository into your PSModulePath (typically into C:\Program Files\WindowsPowerShell\Modules)  You must also copy the Tooling\Examples\SampleConfiguration folder to the PSModulePath.  You must copy Pester (version 3.0.0 or later) and ProtectedData (version 2.1 or later) into the PSModulePath.  You should create a DSC_Resources folder in the same directory as SampleBuild.ps1 and DSC_Configuration.  Copy the following modules into that DSC_Resources folder:  StackExchangeResources  cWebAdministration  cSmbShareOnce these dependencies are set up, you can execute SampleBuild.ps1.  It will run tests against the 3 modules in your DSC_Resources folder, compile your configuration into MOF documents, produce zip files for the resource modules, generate checksums for everything and copy them into C:\Program Files\WindowsPowerShell\DscService\Looks like we are going to need a few more DSC resources. I’m going to go and fork/clone them just like before. (don’t forget to update the URL’s to match your own fork. )# Download required files via Git#Next line not needed if you were following along with my last bloggit clone https://github.com/BladeFireLight/DSC.git c:\GitHub\PshOrgDSC --branch developmentgit clone https://github.com/BladeFireLight/StackExchangeResources.git c:\GitHub\StackExchangeResourcesgit clone https://github.com/BladeFireLight/cWebAdministration.git c:\GitHub\cWebAdministrationgit clone https://github.com/BladeFireLight/cSmbShare.git c:\GitHub\cSmbSharegit clone https://github.com/BladeFireLight/Pester c:\GitHub\Pestergit clone https://github.com/BladeFireLight/ProtectedData.git c:\GitHub\ProtectedDataNow I’m going to create some folder structure and place all the files where they need to go#Create Foldersmkdir c:\DSCmkdir C:\DSC\BuldOutputmkdir C:\DSC\DSC_Configurationmkdir C:\DSC\DSC_Resourcesmkdir C:\DSC\DSC_Scriptmkdir C:\DSC\DSC_Tooling#Copy Filescopy C:\github\PshOrgDSC\Tooling\* C:\DSC\DSC_Tooling\ -Exclude &#39;examples&#39;, &#39;readme.md&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Exclude &#39;examples&#39;, &#39;readme.md&#39; -Recursecopy C:\github\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;Pester&#39;,&#39;ProtectedData&#39; -Recursecopy C:\github\* C:\DSC\DSC_Tooling\ -Include &#39;Pester&#39;,&#39;ProtectedData&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\SampleBuild.ps1 c:\dsc\SampleBuild.ps1copy c:\github\* C:\DSC\DSC_Resources -Include &#39;cSmbShare&#39;, &#39;cWebAdministration&#39;, &#39;StackExchangeResources&#39; -Recursecopy c:\github\* &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;cSmbShare&#39;, &#39;cWebAdministration&#39;, &#39;StackExchangeResources&#39; -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\DSC_Configuration\* C:\DSC\DSC_Configuration -Recursecopy C:\github\PshOrgDSC\Tooling\Examples\* C:\DSC\DSC_Script -Include &#39;SampleConfiguration&#39; -Recurse#delete unneeded folders.dir -Path c:\dsc -Include &#39;.git&#39; -Recurse | del -Recurse -Force #-Confirm:$falsedir -Path &#39;C:\Program Files\WindowsPowerShell\Modules&#39; -Include &#39;.git&#39; -Recurse | del -Recurse -ForceThen result should give us a folder structure like thisC:\DSC├───BuldOutput├───DSC_Configuration│   ├───AllNodes│   ├───Services│   └───SiteData├───DSC_Resources│   ├───cSmbShare│   │   └───DscResources│   │       └───PSHOrg_cSmbShare│   ├───cWebAdministration│   │   ├───DSCResources│   │   │   ├───PSHOrg_cAppPool│   │   │   └───PSHOrg_cWebsite│   │   └───Examples│   └───StackExchangeResources│       ├───DSCResources│       │   ├───StackExchange_CertificateStore│       │   ├───StackExchange_FirewallRule│       │   ├───StackExchange_NetworkAdapter│       │   ├───StackExchange_Pagefile│       │   │   ├───StackExchange_en-US│       │   │   └───StackExchange_nl-NL│       │   ├───StackExchange_PowerPlan│       │   │   └───StackExchange_en-US│       │   ├───StackExchange_ScheduledTask│       │   ├───StackExchange_SetExecutionPolicy│       │   │   └───StackExchange_en-US│       │   └───StackExchange_Timezone│       └───test│           ├───integration│           │   └───StackExchange_PageFile│           │       └───pester│           └───unit│               └───StackExchange_Pagefile│                   └───pester├───DSC_Script│   └───SampleConfiguration└───DSC_Tooling    ├───cDscDiagnostics    ├───cDscResourceDesigner    ├───dscbuild    ├───DscConfiguration    ├───DscDevelopment    ├───DscOperations    ├───Pester    │   ├───bin    │   ├───en-US    │   ├───Examples    │   │   ├───Calculator    │   │   └───Validator    │   ├───Functions    │   │   └───Assertions    │   ├───Snippets    │   └───vendor    │       └───tools    │           ├───OneGet    │           │   └───Etc    │           └───PowerShellGet    │               └───en-US    └───ProtectedData        └───en-USC:\PROGRAM FILES\WINDOWSPOWERSHELL\MODULES├───cDscDiagnostics├───cDscResourceDesigner├───cSmbShare│   └───DscResources│       └───PSHOrg_cSmbShare├───cWebAdministration│   ├───DSCResources│   │   ├───PSHOrg_cAppPool│   │   └───PSHOrg_cWebsite│   └───Examples├───dscbuild├───DscConfiguration├───DscDevelopment├───DscOperations├───Pester│   ├───bin│   ├───en-US│   ├───Examples│   │   ├───Calculator│   │   └───Validator│   ├───Functions│   │   └───Assertions│   ├───Snippets│   └───vendor│       └───tools│           ├───OneGet│           │   └───Etc│           └───PowerShellGet│               └───en-US├───ProtectedData│   └───en-US└───StackExchangeResources    ├───DSCResources    │   ├───StackExchange_CertificateStore    │   ├───StackExchange_FirewallRule    │   ├───StackExchange_NetworkAdapter    │   ├───StackExchange_Pagefile    │   │   ├───StackExchange_en-US    │   │   └───StackExchange_nl-NL    │   ├───StackExchange_PowerPlan    │   │   └───StackExchange_en-US    │   ├───StackExchange_ScheduledTask    │   ├───StackExchange_SetExecutionPolicy    │   │   └───StackExchange_en-US    │   └───StackExchange_Timezone    └───test        ├───integration        │   └───StackExchange_PageFile        │       └───pester        └───unit            └───StackExchange_Pagefile                └───pesternow lets fix C:\DSC\SampleBuild.ps1end{    Import-Module Pester -ErrorAction Stop    Import-Module dscbuild -ErrorAction Stop    Import-Module dscconfiguration -ErrorAction Stop    $params = @{        WorkingDirectory = (Get-TempDirectory).FullName        SourceResourceDirectory = &quot;$PSScriptRoot\DSC_Resources&quot;        SourceToolDirectory = &quot;$PSScriptRoot\DSC_Tooling&quot;        DestinationRootDirectory = &quot;$PSScriptRoot\BuldOutput&quot;        DestinationToolDirectory = $env:TEMP        ConfigurationData = Get-DscConfigurationData -Path &quot;$PSScriptRoot\DSC_Configuration&quot; -Force -verbose        ModulePath = &quot;$PSScriptRoot\DSC_Script&quot;  , &quot;$PSScriptRoot\DSC_Tooling&quot;        ConfigurationModuleName = &#39;SampleConfiguration&#39;        ConfigurationName = &#39;SampleConfiguration&#39;        Configuration = $true        Resource = $true    }    Invoke-DscBuild @params -verbose}begin{    function Get-TempDirectory    {        [CmdletBinding()]        [OutputType([System.IO.DirectoryInfo])]        param ( )        do        {            $tempDir = Join-Path -Path ([System.IO.Path]::GetTempPath()) -ChildPath ([System.IO.Path]::GetRandomFileName())        }        until (-not (Test-Path -Path $tempDir -PathType Container))        return New-Item -Path $tempDir -ItemType Directory -ErrorAction Stop    }}So what is different?  DestinationRootDirectory = “$PSScriptRoot\BuldOutput”          Changed to point to a relative output. this is a test, so there is no need to place it into the common location for a pull server, although in production you may want to. I prefer to copy the files after a build, as it’s usually built on a machine other then the pull server        ConfigurationData = Get-DscConfigurationData -Path “$PSScriptRoot\DSC_Configuration” -Force -verbose  *added verbose so I can see how its progresses and help with troubleshooting  ModulePath = “$PSScriptRoot\DSC_Script”  , “$PSScriptRoot\DSC_Tooling”          This is the big one. ModulePath and SourceResourceDirectory are going to be the only path’s in $psmodulepath when the configuration module (the module referenced by ConfigurationModuleName ) is loaded and when the configuration in ConfigurationName  is executed. This feature was added to resolve a problem when your modules used to build .mof files may be newer then the ones used to configure the machine running them. Something I ran into and Dave Wyatt was kind enough to solve        Invoke-DscBuild @params -verbose  *Added -verbose. I’m a bit of a verbose junky.With the updates to SampleBuild.ps1 we are ready to build our first sample set of .mof filesI do this in a clean environment so I’m opening PowerShell as an administrator and running C:\DSC\SampleBuild.ps1. After a long bit of scrolling if it works the last few lines should look like this.VERBOSE: Moving 718aec80-e8fe-41b5-ac31-fbcd5d0186b1.mof to C:\DSC\BuldOutput\ConfigurationVERBOSE: Moving b4519959-9724-40d5-ab62-5c4f82bbcd80.mof to C:\DSC\BuldOutput\ConfigurationVERBOSE: Moving fc107c0b-1fc8-45fb-9991-a0a1f0fd6c21.mof to C:\DSC\BuldOutput\ConfigurationCongratulations you have your first set of .mof files working with the PowerShell.org DSC tools.Next up. Creating a pull request to update the readme.md and SampleBuild.ps1">
    <meta itemprop="datePublished" content="May 03, 2015">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Invoke-DscBuild | Test-Lab
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
              <ul class="toc__menu">
  <li><a href="#posts-in-this-series">Posts in This series</a></li>
</ul>
            </nav>
          </aside>
        
        <h3 id="posts-in-this-series">Posts in This series</h3>

<ol>
  <li><a href="/test-homelab-inputobject-the-plan/">Test-HomeLab -InputObject “The Plan”</a></li>
  <li><a href="/Get-Posh-Git-Test-Lab/">Get-Posh-Git | Test-Lab</a></li>
  <li><a href="/get-dscframework-test-lab/">Get-DSCFramework | Test-Lab</a></li>
  <li>Invoke-DscBuild | Test-Lab (This Post)</li>
  <li><a href="/test-lab-update-github/">Test-Lab | Update-GitHub</a></li>
</ol>

<p>In the last post we forked a copy of the Powershell.org DSC tools and cloned a copy locally</p>

<p>Today I’m going to get the example configuration working.</p>

<p>Now looking at the README.md under examples seems straightforward, but I know for a fact that it’s missing a few steps.</p>

<p>This folder contains some very basic examples of what a DSC configurationData folder structure, script, and call to Invoke-DscBuild might look like.  If you want to execute SampleBuild.ps1, there are a few dependencies you need to set up ahead of time:</p>

<ol>
  <li>You must install all of the DSC tooling modules from this repository into your PSModulePath (typically into C:\Program Files\WindowsPowerShell\Modules)</li>
  <li>You must also copy the Tooling\Examples\SampleConfiguration folder to the PSModulePath.</li>
  <li>You must copy <a href="https://github.com/pester/Pester">Pester</a> (version 3.0.0 or later) and <a href="https://github.com/dlwyatt/ProtectedData">ProtectedData</a> (version 2.1 or later) into the PSModulePath.</li>
  <li>You should create a DSC_Resources folder in the same directory as SampleBuild.ps1 and DSC_Configuration.  Copy the following modules into that DSC_Resources folder:</li>
  <li><a href="https://github.com/PowerShellOrg/StackExchangeResources">StackExchangeResources</a></li>
  <li><a href="https://github.com/PowerShellOrg/cWebAdministration">cWebAdministration</a></li>
  <li><a href="https://github.com/PowerShellOrg/cSmbShare">cSmbShare</a></li>
</ol>

<p>Once these dependencies are set up, you can execute SampleBuild.ps1.  It will run tests against the 3 modules in your DSC_Resources folder, compile your configuration into MOF documents, produce zip files for the resource modules, generate checksums for everything and copy them into C:\Program Files\WindowsPowerShell\DscService\</p>

<p>Looks like we are going to need a few more DSC resources. I’m going to go and fork/clone them just like before. (don’t forget to update the URL’s to match your own fork. )</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Download required files via Git</span>
<span class="c1">#Next line not needed if you were following along with my last blog</span>
git clone https://github.com/BladeFireLight/DSC.git c:\GitHub\PshOrgDSC --branch development
git clone https://github.com/BladeFireLight/StackExchangeResources.git c:\GitHub\StackExchangeResources
git clone https://github.com/BladeFireLight/cWebAdministration.git c:\GitHub\cWebAdministration
git clone https://github.com/BladeFireLight/cSmbShare.git c:\GitHub\cSmbShare
git clone https://github.com/BladeFireLight/Pester c:\GitHub\Pester
git clone https://github.com/BladeFireLight/ProtectedData.git c:\GitHub\ProtectedData
</code></pre></div></div>

<p>Now I’m going to create some folder structure and place all the files where they need to go</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Create Folders</span>
<span class="nb">mkdir </span>c:\DSC
<span class="nb">mkdir </span>C:\DSC\BuldOutput
<span class="nb">mkdir </span>C:\DSC\DSC_Configuration
<span class="nb">mkdir </span>C:\DSC\DSC_Resources
<span class="nb">mkdir </span>C:\DSC\DSC_Script
<span class="nb">mkdir </span>C:\DSC\DSC_Tooling

<span class="c1">#Copy Files</span>
<span class="nb">copy </span>C:\github\PshOrgDSC\Tooling\<span class="k">*</span> C:\DSC\DSC_Tooling\ -Exclude <span class="s1">'examples'</span>, <span class="s1">'readme.md'</span> -Recurse
<span class="nb">copy </span>C:\github\PshOrgDSC\Tooling\<span class="k">*</span> <span class="s1">'C:\Program Files\WindowsPowerShell\Modules'</span> -Exclude <span class="s1">'examples'</span>, <span class="s1">'readme.md'</span> -Recurse
<span class="nb">copy </span>C:\github\<span class="k">*</span> <span class="s1">'C:\Program Files\WindowsPowerShell\Modules'</span> -Include <span class="s1">'Pester'</span>,<span class="s1">'ProtectedData'</span> -Recurse
<span class="nb">copy </span>C:\github\<span class="k">*</span> C:\DSC\DSC_Tooling\ -Include <span class="s1">'Pester'</span>,<span class="s1">'ProtectedData'</span> -Recurse
<span class="nb">copy </span>C:\github\PshOrgDSC\Tooling\Examples\SampleBuild.ps1 c:\dsc\SampleBuild.ps1
<span class="nb">copy </span>c:\github\<span class="k">*</span> C:\DSC\DSC_Resources -Include <span class="s1">'cSmbShare'</span>, <span class="s1">'cWebAdministration'</span>, <span class="s1">'StackExchangeResources'</span> -Recurse
<span class="nb">copy </span>c:\github\<span class="k">*</span> <span class="s1">'C:\Program Files\WindowsPowerShell\Modules'</span> -Include <span class="s1">'cSmbShare'</span>, <span class="s1">'cWebAdministration'</span>, <span class="s1">'StackExchangeResources'</span> -Recurse
<span class="nb">copy </span>C:\github\PshOrgDSC\Tooling\Examples\DSC_Configuration\<span class="k">*</span> C:\DSC\DSC_Configuration -Recurse
<span class="nb">copy </span>C:\github\PshOrgDSC\Tooling\Examples\<span class="k">*</span> C:\DSC\DSC_Script -Include <span class="s1">'SampleConfiguration'</span> -Recurse

<span class="c1">#delete unneeded folders.</span>
<span class="nb">dir</span> -Path c:\dsc -Include <span class="s1">'.git'</span> -Recurse | <span class="nb">del</span> -Recurse -Force <span class="c1">#-Confirm:$false</span>
<span class="nb">dir</span> -Path <span class="s1">'C:\Program Files\WindowsPowerShell\Modules'</span> -Include <span class="s1">'.git'</span> -Recurse | <span class="nb">del</span> -Recurse -Force
</code></pre></div></div>

<p>Then result should give us a folder structure like this</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\DSC
├───BuldOutput
├───DSC_Configuration
│   ├───AllNodes
│   ├───Services
│   └───SiteData
├───DSC_Resources
│   ├───cSmbShare
│   │   └───DscResources
│   │       └───PSHOrg_cSmbShare
│   ├───cWebAdministration
│   │   ├───DSCResources
│   │   │   ├───PSHOrg_cAppPool
│   │   │   └───PSHOrg_cWebsite
│   │   └───Examples
│   └───StackExchangeResources
│       ├───DSCResources
│       │   ├───StackExchange_CertificateStore
│       │   ├───StackExchange_FirewallRule
│       │   ├───StackExchange_NetworkAdapter
│       │   ├───StackExchange_Pagefile
│       │   │   ├───StackExchange_en-US
│       │   │   └───StackExchange_nl-NL
│       │   ├───StackExchange_PowerPlan
│       │   │   └───StackExchange_en-US
│       │   ├───StackExchange_ScheduledTask
│       │   ├───StackExchange_SetExecutionPolicy
│       │   │   └───StackExchange_en-US
│       │   └───StackExchange_Timezone
│       └───test
│           ├───integration
│           │   └───StackExchange_PageFile
│           │       └───pester
│           └───unit
│               └───StackExchange_Pagefile
│                   └───pester
├───DSC_Script
│   └───SampleConfiguration
└───DSC_Tooling
    ├───cDscDiagnostics
    ├───cDscResourceDesigner
    ├───dscbuild
    ├───DscConfiguration
    ├───DscDevelopment
    ├───DscOperations
    ├───Pester
    │   ├───bin
    │   ├───en-US
    │   ├───Examples
    │   │   ├───Calculator
    │   │   └───Validator
    │   ├───Functions
    │   │   └───Assertions
    │   ├───Snippets
    │   └───vendor
    │       └───tools
    │           ├───OneGet
    │           │   └───Etc
    │           └───PowerShellGet
    │               └───en-US
    └───ProtectedData
        └───en-US

C:\PROGRAM FILES\WINDOWSPOWERSHELL\MODULES
├───cDscDiagnostics
├───cDscResourceDesigner
├───cSmbShare
│   └───DscResources
│       └───PSHOrg_cSmbShare
├───cWebAdministration
│   ├───DSCResources
│   │   ├───PSHOrg_cAppPool
│   │   └───PSHOrg_cWebsite
│   └───Examples
├───dscbuild
├───DscConfiguration
├───DscDevelopment
├───DscOperations
├───Pester
│   ├───bin
│   ├───en-US
│   ├───Examples
│   │   ├───Calculator
│   │   └───Validator
│   ├───Functions
│   │   └───Assertions
│   ├───Snippets
│   └───vendor
│       └───tools
│           ├───OneGet
│           │   └───Etc
│           └───PowerShellGet
│               └───en-US
├───ProtectedData
│   └───en-US
└───StackExchangeResources
    ├───DSCResources
    │   ├───StackExchange_CertificateStore
    │   ├───StackExchange_FirewallRule
    │   ├───StackExchange_NetworkAdapter
    │   ├───StackExchange_Pagefile
    │   │   ├───StackExchange_en-US
    │   │   └───StackExchange_nl-NL
    │   ├───StackExchange_PowerPlan
    │   │   └───StackExchange_en-US
    │   ├───StackExchange_ScheduledTask
    │   ├───StackExchange_SetExecutionPolicy
    │   │   └───StackExchange_en-US
    │   └───StackExchange_Timezone
    └───test
        ├───integration
        │   └───StackExchange_PageFile
        │       └───pester
        └───unit
            └───StackExchange_Pagefile
                └───pester
</code></pre></div></div>

<p>now lets fix C:\DSC\SampleBuild.ps1</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">end</span>
<span class="o">{</span>
    Import-Module Pester -ErrorAction Stop
    Import-Module dscbuild -ErrorAction Stop
    Import-Module dscconfiguration -ErrorAction Stop

    <span class="nv">$params</span> <span class="o">=</span> @<span class="o">{</span>
        WorkingDirectory <span class="o">=</span> <span class="o">(</span>Get-TempDirectory<span class="o">)</span>.FullName
        SourceResourceDirectory <span class="o">=</span> <span class="s2">"</span><span class="nv">$PSScriptRoot</span><span class="s2">\DSC_Resources"</span>
        SourceToolDirectory <span class="o">=</span> <span class="s2">"</span><span class="nv">$PSScriptRoot</span><span class="s2">\DSC_Tooling"</span>
        DestinationRootDirectory <span class="o">=</span> <span class="s2">"</span><span class="nv">$PSScriptRoot</span><span class="s2">\BuldOutput"</span>
        DestinationToolDirectory <span class="o">=</span> <span class="nv">$env</span>:TEMP
        ConfigurationData <span class="o">=</span> Get-DscConfigurationData -Path <span class="s2">"</span><span class="nv">$PSScriptRoot</span><span class="s2">\DSC_Configuration"</span> -Force -verbose
        ModulePath <span class="o">=</span> <span class="s2">"</span><span class="nv">$PSScriptRoot</span><span class="s2">\DSC_Script"</span>  , <span class="s2">"</span><span class="nv">$PSScriptRoot</span><span class="s2">\DSC_Tooling"</span>
        ConfigurationModuleName <span class="o">=</span> <span class="s1">'SampleConfiguration'</span>
        ConfigurationName <span class="o">=</span> <span class="s1">'SampleConfiguration'</span>
        <span class="nb">Configuration</span> <span class="o">=</span> <span class="nv">$true</span>
        Resource <span class="o">=</span> <span class="nv">$true</span>
    <span class="o">}</span>

    Invoke-DscBuild @params -verbose
<span class="o">}</span>

<span class="k">begin</span>
<span class="o">{</span>
    <span class="k">function </span>Get-TempDirectory
    <span class="o">{</span>
        <span class="o">[</span><span class="na">CmdletBinding</span><span class="o">()]</span>
        <span class="o">[</span>OutputType<span class="o">([</span>System.IO.DirectoryInfo]<span class="o">)]</span>
        <span class="k">param</span> <span class="o">(</span> <span class="o">)</span>

        <span class="k">do</span>
        <span class="o">{</span>
            <span class="nv">$tempDir</span> <span class="o">=</span> <span class="nb">Join-Path</span> -Path <span class="o">([</span>System.IO.Path]::GetTempPath<span class="o">())</span> -ChildPath <span class="o">([</span>System.IO.Path]::GetRandomFileName<span class="o">())</span>
        <span class="o">}</span>
        <span class="k">until</span> <span class="o">(</span>-not <span class="o">(</span><span class="nb">Test-Path</span> -Path <span class="nv">$tempDir</span> -PathType Container<span class="o">))</span>

        <span class="k">return </span><span class="nb">New-Item</span> -Path <span class="nv">$tempDir</span> -ItemType Directory -ErrorAction Stop
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>So what is different?</p>

<ul>
  <li>DestinationRootDirectory = “$PSScriptRoot\BuldOutput”
    <ul>
      <li>Changed to point to a relative output. this is a test, so there is no need to place it into the common location for a pull server, although in production you may want to. I prefer to copy the files after a build, as it’s usually built on a machine other then the pull server</li>
    </ul>
  </li>
  <li>ConfigurationData = Get-DscConfigurationData -Path “$PSScriptRoot\DSC_Configuration” -Force -verbose
  *added verbose so I can see how its progresses and help with troubleshooting</li>
  <li>ModulePath = “$PSScriptRoot\DSC_Script”  , “$PSScriptRoot\DSC_Tooling”
    <ul>
      <li>This is the big one. ModulePath and SourceResourceDirectory are going to be the only path’s in $psmodulepath when the configuration module (the module referenced by ConfigurationModuleName ) is loaded and when the configuration in ConfigurationName  is executed. This feature was added to resolve a problem when your modules used to build .mof files may be newer then the ones used to configure the machine running them. Something I ran into and Dave Wyatt was kind enough to solve</li>
    </ul>
  </li>
  <li>Invoke-DscBuild @params -verbose
  *Added -verbose. I’m a bit of a verbose junky.</li>
</ul>

<p>With the updates to SampleBuild.ps1 we are ready to build our first sample set of .mof files</p>

<p>I do this in a clean environment so I’m opening PowerShell as an administrator and running C:\DSC\SampleBuild.ps1. After a long bit of scrolling if it works the last few lines should look like this.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>VERBOSE: Moving 718aec80-e8fe-41b5-ac31-fbcd5d0186b1.mof to C:\DSC\BuldOutput\Configuration
VERBOSE: Moving b4519959-9724-40d5-ab62-5c4f82bbcd80.mof to C:\DSC\BuldOutput\Configuration
VERBOSE: Moving fc107c0b-1fc8-45fb-9991-a0a1f0fd6c21.mof to C:\DSC\BuldOutput\Configuration
</code></pre></div></div>

<p>Congratulations you have your first set of .mof files working with the PowerShell.org DSC tools.</p>

<p>Next up. Creating a pull request to update the readme.md and SampleBuild.ps1</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/testlab" class="page__taxonomy-item" rel="tag">TestLab</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2015-05-03T00:00:00-05:00">May 03, 2015</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=BladeFireLight&text=Invoke-DscBuild+%5C%7C+Test-Lab%20https%3A%2F%2Fblog.bladefirelight.com%2Finvoke-dscbuild-test-lab%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.bladefirelight.com%2Finvoke-dscbuild-test-lab%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https%3A%2F%2Fblog.bladefirelight.com%2Finvoke-dscbuild-test-lab%2F" class="btn btn--google-plus" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Google Plus"><i class="fab fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fblog.bladefirelight.com%2Finvoke-dscbuild-test-lab%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/get-dscframework-test-lab/" class="pagination--pager" title="Get-DSCFramework | Test-Lab
">Previous</a>
    
    
      <a href="/test-lab-update-github/" class="pagination--pager" title="Test-Lab | Update-GitHub
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <section id="static-comments">
        
          <!-- Start static comments -->
          <div class="js-comments">
            
          </div>
          <!-- End static comments -->

          <!-- Start new comment form -->
          <div class="page__comments-form">
            <h4 class="page__comments-title">Leave a Comment</h4>
            <p class="small">Your email address will not be published. Required fields are marked <span class="required">*</span></p>
            <form id="new_comment" class="page__comments-form js-form form" method="post" action="https://api.staticman.net/v2/entry/bladefirelight/blog_source/master/comments">
              <div class="form__spinner">
                <i class="fas fa-spinner fa-spin fa-3x fa-fw"></i>
                <span class="sr-only">Loading...</span>
              </div>

              <div class="form-group">
                <label for="comment-form-message">Comment <small class="required">*</small></label>
                <textarea type="text" rows="3" id="comment-form-message" name="fields[message]" tabindex="1"></textarea>
                <div class="small help-block"><a href="https://daringfireball.net/projects/markdown/">Markdown is supported.</a></div>
              </div>
              <div class="form-group">
                <label for="comment-form-name">Name <small class="required">*</small></label>
                <input type="text" id="comment-form-name" name="fields[name]" tabindex="2" />
              </div>
              <div class="form-group">
                <label for="comment-form-email">Email address <small class="required">*</small></label>
                <input type="email" id="comment-form-email" name="fields[email]" tabindex="3" />
              </div>
              <div class="form-group">
                <label for="comment-form-url">Website (optional)</label>
                <input type="url" id="comment-form-url" name="fields[url]" tabindex="4"/>
              </div>
              <div class="form-group hidden" style="display: none;">
                <input type="hidden" name="options[slug]" value="invoke-dscbuild-test-lab">
                <label for="comment-form-location">Not used. Leave blank if you are a human.</label>
                <input type="text" id="comment-form-location" name="fields[hidden]" autocomplete="off"/>
                
                
              </div>
              <!-- Start comment form alert messaging -->
              <p class="hidden js-notice">
                <strong class="js-notice-text"></strong>
              </p>
              <!-- End comment form alert messaging -->
              
              <div class="form-group">
                <button type="submit" id="comment-form-submit" tabindex="5" class="btn btn--primary btn--large">Submit Comment</button>
              </div>
            </form>
          </div>
          <!-- End new comment form -->
          
        
      </section>
    
</div>
    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/default-teaser.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/nuggets/collecting-ca-certificates-for-dsc-configuration/" rel="permalink">Collecting CA Certificates for DSC Configuration
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Best practice is to use individual certificates for each Node for DSC. While you can use auto enrollment, getting the certificates to where the MOF are build...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/default-teaser.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/windowsimagetools/Creating-an-Updateed-Image-Part3-Updates/" rel="permalink">Windows Image Tools | Creating an Updated Image Part 3
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">One of the time consuming steps to deploying new VMs is the time spend managing Images and and applying patches. I’m not big on Golden images. I tend to use ...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/default-teaser.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/windowsimagetools/Creating-an-Updateed-Image-Part2-WMF5/" rel="permalink">Windows Image Tools | Creating an Updated Image Part 2
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  6 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">One of the time consuming steps to deploying new VMs is the time spend managing Images and and applying patches. I’m not big on Golden images. I tend to use ...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/default-teaser.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/windowsimagetools/Creating-an-Updateed-Image-Part1-Base-VHDX/" rel="permalink">Windows Image Tools | Creating an Updated Image Part 1
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">One of the time consuming steps to deploying new VMs is the time spend managing Images and and applying patches. I’m not big on Golden images. I tend to use ...</p>
  </article>
</div>
        
      </div>
    </div>
  
  
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="search-searchbar"></div>
    <div class="search-hits"></div></div>
      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/BladeFireLight"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="https://github.com/BladeFireLight"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 David Jones. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.13/js/all.js"></script>


<!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'H9ZC0SHNUQ',
  apiKey: 'b4603a9d806ac4befb326ce1731d101e',
  indexName: 'Blog',
  searchParameters: {
    restrictSearchableAttributes: [
      'title',
      'content'
    ]
  }
});

const hitTemplate = function(hit) {
  const url = hit.url;
  const title = hit._highlightResult.title.value;
  const content = hit._highlightResult.html.value;

  return `
    <div class="list__item">
      <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
        <h2 class="archive__item-title" itemprop="headline"><a href="${url}">${title}</a></h2>
        <div class="archive__item-excerpt" itemprop="description">${content}</div>
      </article>
    </div>
  `;
}

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '.search-searchbar',
    
    placeholder: 'Enter your search term...'
  })
);
search.addWidget(
  instantsearch.widgets.hits({
    container: '.search-hits',
    templates: {
      item: hitTemplate
    }
  })
);

// Starting the search
search.start();
</script>





    
  <script>
    (function ($) {
    var $comments = $('.js-comments');

    $('#new_comment').submit(function () {
      var form = this;

      $(form).addClass('disabled');
      $('#comment-form-submit').html('<i class="fas fa-spinner fa-spin fa-fw"></i> Loading...');

      $.ajax({
        type: $(this).attr('method'),
        url: $(this).attr('action'),
        data: $(this).serialize(),
        contentType: 'application/x-www-form-urlencoded',
        success: function (data) {
          $('#comment-form-submit').html('Submitted');
          $('.page__comments-form .js-notice').removeClass('notice--danger');
          $('.page__comments-form .js-notice').addClass('notice--success');
          showAlert('Thanks for your comment! It will show on the site once it has been approved.');
        },
        error: function (err) {
          console.log(err);
          $('#comment-form-submit').html('Submit Comment');
          $('.page__comments-form .js-notice').removeClass('notice--success');
          $('.page__comments-form .js-notice').addClass('notice--danger');
          showAlert('Sorry, there was an error with your submission. Please make sure all required fields have been completed and try again.');
          $(form).removeClass('disabled');
        }
      });

      return false;
    });

    function showAlert(message) {
      $('.page__comments-form .js-notice').removeClass('hidden');
      $('.page__comments-form .js-notice-text').html(message);
    }
  })(jQuery);
  </script>

  


  </body>
</html>